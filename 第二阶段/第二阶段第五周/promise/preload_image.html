<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        .bg {
            display: flex;
            height: 100vh;
            width: 100vw;
            align-items: center;
            justify-content: center;
            background-color: #000;
            color: #fff;
        }
    
    
    
    </style>
</head>
<body>
    <div class="bg">
        loading...
    </div>
    <img src="//m.360buyimg.com/babel/jfs/t27898/177/2116722740/97958/2bc3e127/5bf7b325N8e454215.jpg" alt="">
    <img src="//img11.360buyimg.com/mobilecms/s350x250_jfs/t1/151/11/11747/148968/5bcf34cdEb41dd131/cb9c7c811a1052e9.jpg" alt="">
    <img src="//m.360buyimg.com/babel/jfs/t28927/295/371468481/96735/bf8d5719/5bf14d8aNf66930be.jpg" alt="">
    <img src="//m.360buyimg.com/babel/jfs/t27721/249/2118236449/91404/20e61d48/5bf7a2a2N2e45fbd0.jpg" alt="">
    <script src="js/until.js"></script>
    <script>
        // const imgSrc = [
        //     '//m.360buyimg.com/babel/jfs/t27898/177/2116722740/97958/2bc3e127/5bf7b325N8e454215.jpg',
        //     '//img.360buyimg.com/pop/jfs/t1/5475/13/1124/82483/5b932a4dE869998fd/aedca08458a33b41.jpg',
        //     '//m.360buyimg.com/babel/jfs/t28927/295/371468481/96735/bf8d5719/5bf14d8aNf66930be.jpg',
        //     '//m.360buyimg.com/babel/jfs/t27721/249/2118236449/91404/20e61d48/5bf7a2a2N2e45fbd0.jpg'    
        // ]
        var $imgAll = document.querySelectorAll('img');
        // var count = 0;
        // for(let i = 0; i < $imgAll.length; i++) {
            // loadImg($imgAll[i]).then(data => {
            //     count++;
            //     console.log(count);
            //     if(count == $imgAll.length) {
            //         document.querySelector('.bg').style.display = 'none';
            //     }
            // })
        // }
        
        var arr = []
        for(let i = 0; i < $imgAll.length; i++) {
           arr.push(loadImg($imgAll[i]));
        }
        Promise.all(arr).then(res => {
            document.querySelector('.bg').style.display = 'none';
            console.log(res);
        })
        
        // 传入一个数组, 数组元素默认是promise的实例
        // 如果所有异步函数全部成功, 执行成功的回调
        // 否则有一个失败, 就执行失败的回调
        // Promise.all()

        

        
        
        
    </script>
</body>
</html>